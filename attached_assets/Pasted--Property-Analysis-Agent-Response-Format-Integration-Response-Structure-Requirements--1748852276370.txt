# Property Analysis Agent Response Format & Integration

## Response Structure Requirements

### 1. Opening Format
Always start with:
"Hi [owner's name], I'm delighted to help you explore the development potential for your [project type] project. Let me provide you with a clear analysis of what's possible at your property."

### 2. Property Summary Section
Present in paragraph format (NO markdown symbols # * or bullet points):

**Property Details:**
Address: [full address]
Project Type: [user's specified project]
Budget: [if provided, otherwise state "not specified"]
Current Zoning: [official zone name and code]

### 3. Planning Zone Analysis
**Section Title:** "Planning Zone Considerations for Your [Project Type]"

**Content Requirements:**
- Reference the specific PDF planning document for the zone
- Extract relevant rules that directly apply to the user's project description
- Focus ONLY on what relates to their specific project (don't list general zone permissions)
- Use plain language, no bullet points or markdown formatting

**Integration Requirement:**
Before responding, automatically fetch and analyze the relevant council planning PDF:
- For Auckland properties: Use Auckland Unitary Plan zone-specific PDFs
- For Wellington properties: Use Wellington District Plan PDFs  
- For Christchurch properties: Use Christchurch District Plan PDFs
- Extract and cite specific clauses that apply to the user's project

### 4. Building Code & Act Analysis
**Section Title:** "Building Code Requirements for Your [Project Type]"

**RAG Integration Requirements:**
Search and reference:
- Schedule 1 of the Building Act (for consent exemptions)
- MBIE "work that doesn't require consent" documents
- Relevant building code clauses (B1, E2, etc.) specific to the project type
- Specific consent requirements for the described work

**Content Format:**
Present findings in paragraph format explaining:
- Whether building consent is required (with specific reference to Building Act clauses)
- Any exemptions that may apply (with Schedule 1 references)
- Professional requirements (LBP, engineer sign-offs, etc.)
- Key compliance requirements specific to their project

### 5. Conclusion
End with: "Based on this analysis, [concise summary of what's possible]. Would you like me to elaborate on any specific aspect of your project requirements?"

## Data Integration Setup

### Planning Document Integration
**Implementation Steps:**

1. **Create Zone-to-PDF Mapping:**
```json
{
  "auckland_zones": {
    "Rural - Countryside Living Zone": "https://unitaryplan.aucklandcouncil.govt.nz/images/Auckland%20Unitary%20Plan%20Operative/Chapter%20H%20Zones/H19%20Rural%20zones.pdf",
    "Residential - Single House Zone": "https://unitaryplan.aucklandcouncil.govt.nz/images/Auckland%20Unitary%20Plan%20Operative/Chapter%20H%20Zones/H1%20Residential%20-%20Single%20House%20Zone.pdf",
    "Business - Mixed Use Zone": "https://unitaryplan.aucklandcouncil.govt.nz/images/Auckland%20Unitary%20Plan%20Operative/Chapter%20H%20Zones/H8%20Business%20-%20Mixed%20Use%20Zone.pdf"
  },
  "wellington_zones": {
    "Residential Zone": "[Wellington PDF URL]",
    "Rural Zone": "[Wellington PDF URL]"
  }
}
```

2. **Automatic PDF Processing:**
When property analysis is requested:
- Identify the property's zone from existing API
- Look up corresponding planning PDF URL
- Fetch and extract relevant sections from PDF
- Focus extraction on rules relating to user's specific project type

3. **Content Filtering:**
Only extract and present information that directly relates to:
- The specific building/development work described
- Height, coverage, setback rules for that work type
- Consent requirements for that specific project
- Any restrictions or permissions specific to the project

### Building Code RAG Enhancement
**Required Data Sources Integration:**

1. **Schedule 1 Building Act Analysis:**
- Automatically search Schedule 1 for project-specific exemptions
- Reference specific clauses by number
- Explain applicability to the user's project

2. **MBIE Document Integration:**
- Search MBIE exempt work guidance for project type
- Reference specific MBIE publication names and sections
- Provide direct quotes with proper attribution

3. **Building Code Clause Integration:**
- Identify relevant building code clauses (B1 Structure, E2 External Moisture, etc.)
- Extract requirements specific to the project type
- Reference specific clause numbers and requirements

## Response Format Example

"Hi John, I'm delighted to help you explore the development potential for your double garage project. Let me provide you with a clear analysis of what's possible at your property.

**Property Details:** Your property at 39 Vaughans Road, Okura is a residential project with a Rural - Countryside Living Zone (Zone 3) classification under the Auckland Unitary Plan.

**Planning Zone Considerations for Your Double Garage:** According to the Auckland Unitary Plan Rural Zones document, your Rural - Countryside Living Zone permits accessory buildings including garages. The zone allows building coverage up to 10% of the site area with maximum height restrictions of 8 metres for accessory buildings. Setback requirements specify minimum 10 metre distances from boundaries for buildings over 20 square metres. Your proposed double garage would be classified as an accessory building to your existing dwelling.

**Building Code Requirements for Your Double Garage:** Under Schedule 1 of the Building Act 2004, detached garages under certain size and height thresholds may be exempt from building consent. However, MBIE guidance specifies that garages over 40 square metres require building consent. Your double garage project will likely require building consent including structural design by a Licensed Building Practitioner, compliance with Building Code Clause B1 for structural requirements, and E2 External Moisture provisions for weatherproofing.

Based on this analysis, your double garage project appears feasible within your zone parameters but will require building consent and professional design input. Would you like me to elaborate on any specific aspect of your project requirements?"

## Implementation Notes

- Remove ALL markdown formatting from responses (no #, *, -, or bullet points)
- Write in flowing paragraph format
- Always cite specific document names and clause numbers
- Integrate PDF content automatically based on property zone
- Focus responses only on the user's specific project type
- Keep responses concise but comprehensive
- Always end with an invitation for more specific questions