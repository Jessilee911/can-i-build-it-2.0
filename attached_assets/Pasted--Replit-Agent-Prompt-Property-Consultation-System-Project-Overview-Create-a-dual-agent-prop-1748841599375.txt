# Replit Agent Prompt: Property Consultation System

## Project Overview
Create a dual-agent property consultation system that guides users through location confirmation and provides personalized building consent advice.

## System Architecture

### Agent 1: Location Confirmation
**Purpose**: Capture user details and confirm property location
**Features**:
- User name input field
- Property address input field
- Mock location search functionality (simulate API call with 1.5 second delay)
- Display confirmed location with:
  - Full address
  - Mock coordinates (Christchurch, NZ area: -43.5321 ± 0.1, 172.6362 ± 0.1)
  - Random zone assignment (Residential/Commercial/Industrial/Rural)
- "Confirm Location & Continue" button to proceed to Agent 2

### Agent 2: Property Consultation Chat
**Purpose**: Provide personalized building consent and planning advice
**Features**:
- Welcome user by name with property summary
- Project description input (textarea)
- Real-time chat interface with:
  - User messages (right-aligned, blue gradient)
  - Agent responses (left-aligned, white with border)
  - Typing indicators with animated dots
  - Enter key to send messages

## Core Functionality Requirements

### 1. Building Code Database
Create JavaScript objects containing:

**Building Regulations**:
```javascript
{
  carport: { maxAreaWithoutConsent: 40, maxHeightWithoutConsent: 6, setbackRequirements: "1m from boundaries" },
  extension: { maxAreaWithoutConsent: 25, maxHeightWithoutConsent: 4, setbackRequirements: "1m from side, 3m from rear" },
  deck: { maxAreaWithoutConsent: 30, maxHeightWithoutConsent: 1.5, setbackRequirements: "1m from boundaries" },
  shed: { maxAreaWithoutConsent: 40, maxHeightWithoutConsent: 4, setbackRequirements: "1m from boundaries" }
}
```

**Zone Information**:
```javascript
{
  Residential: { buildingCoverage: "35% maximum", heightLimit: "8m maximum", setbacks: "Standard residential" },
  Commercial: { buildingCoverage: "80% maximum", heightLimit: "12m maximum", setbacks: "Reduced setbacks" },
  Industrial: { buildingCoverage: "70% maximum", heightLimit: "15m maximum", setbacks: "Larger setbacks" },
  Rural: { buildingCoverage: "10% maximum", heightLimit: "10m maximum", setbacks: "Large setbacks required" }
}
```

### 2. Intelligent Response System
**Initial Consultation Response**:
- Display zone information for user's property
- Analyze project description for:
  - Project type (carport, extension, deck, shed)
  - Dimensions (extract numbers + "m²" or "square meters")
  - Height measurements
- Provide specific consent determination with ✅/❌ indicators
- List applicable building requirements

**Chat Response Logic**:
- **Consent Questions**: Analyze dimensions against building code limits
- **Setback Questions**: Provide zone-specific and structure-specific setback requirements
- **Height Questions**: Show zone limits and permitted activity heights
- **Zone Questions**: Display comprehensive zone information
- **Site Coverage**: Explain coverage rules and calculation requirements
- **General Questions**: Request more specific information

### 3. Text Processing Functions
**Required Functions**:
- `extractDimensions(text)`: Find area and height measurements in user input
- `identifyProjectType(text)`: Detect carport, extension, deck, shed keywords
- `analyzeConsentRequirement(projectType, area, height)`: Return consent determination
- `formatResponse(message)`: Convert **bold** to HTML, add line breaks, color code ✅❌

### 4. User Interface Requirements

**Styling Specifications**:
- Modern glassmorphism design with blur effects
- Purple gradient background (135deg, #667eea 0%, #764ba2 100%)
- White container with rounded corners and shadow
- Form inputs with focus animations (transform: translateY(-2px))
- Gradient buttons with hover effects
- Responsive design (max-width: 800px, centered)

**Animation Requirements**:
- Slide-in animation for chat messages
- 3-dot typing indicator with staggered animation
- Button hover effects with translateY and box-shadow
- Smooth transitions (0.3s ease) for all interactive elements

## Technical Implementation

### Data Flow
1. User enters name + address in Agent 1
2. Mock location search stores: `{name, address, coordinates, zone}`
3. Agent 2 receives user data and displays property summary
4. Project description triggers initial consultation analysis
5. Chat system maintains context throughout conversation

### Key JavaScript Functions to Implement
```javascript
// Core functions needed:
searchLocation() // Mock API call with random zone assignment
proceedToAgent2() // Hide Agent 1, show Agent 2 with user data
startConsultation() // Analyze initial project description
sendMessage() // Handle chat input and generate responses
generateResponse(userMessage) // Main response logic with keyword detection
analyzeProject(description) // Extract project details and provide consent analysis
```

### Response Formatting
- Use markdown-style **bold** converted to HTML `<strong>`
- Color code: ✅ green (#28a745), ❌ red (#dc3545)
- Structure responses with clear headings and bullet points
- Maintain professional, helpful tone

## Success Criteria
- Seamless transition between agents
- Accurate consent determinations based on project dimensions
- Context-aware chat responses
- Professional UI with smooth animations
- Mobile-responsive design
- No external dependencies (pure HTML/CSS/JS)

## Testing Scenarios
1. "I want to build a 20m² carport" → Should return ✅ NO CONSENT REQUIRED
2. "Planning a 50m² extension" → Should return ❌ CONSENT REQUIRED  
3. Zone-specific questions should reference user's assigned zone
4. Setback questions should provide both zone and structure-specific requirements
5. General questions should request more specific information

Create this as a single HTML file with embedded CSS and JavaScript. Focus on functionality over complex styling initially, but ensure the user experience flows smoothly from location confirmation to personalized consultation.